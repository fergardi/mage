<div class="kingdom-temple" fxLayout="row wrap" fxLayoutGap="10px grid" [@fadeInOnEnter]>

  <div fxFlex.xl="33" fxFlex.lg="33" fxFlex.md="50" fxFlex.sm="100" fxFlex.xs="100">

    <mat-card>

      <mat-card-header>
        <img mat-card-avatar src="/assets/images/cards/temple.png">
        <mat-card-title>{{ 'kingdom.temple.name' | translate }}</mat-card-title>
        <mat-card-subtitle>{{ 'kingdom.temple.description' | translate }}</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <span>{{ 'kingdom.temple.help' | translate }}</span>
        <div matSubheader>{{ 'card.list.gods' | translate }}:</div>
        <mat-action-list dense tourAnchor="tour.temple">
          <button mat-list-item *ngFor="let god of kingdomGods" [disabled]="god.armageddon" (click)="openOfferDialog(god)" class="legendary">
            <div mat-list-avatar matBadge="?" matBadgePosition="above before">
              <img mat-list-avatar class="god-avatar" [src]="god.image">
            </div>
            <div mat-line>{{ god.name | translate }}</div>
            <div mat-line class="mat-card-subtitle">{{ god.description | translate }}</div>
            <div mat-list-avatar *ngIf="!god.armageddon && god.gold > 0" [matBadge]="(god.sacrifice | short) + ' / ' + (god.gold | short)" matBadgePosition="above after"><img mat-list-avatar src="/assets/images/resources/gold.png"></div>
            <div mat-list-avatar *ngIf="!god.armageddon && god.mana > 0" [matBadge]="(god.sacrifice | short) + ' / ' + (god.mana | short)" matBadgePosition="above after"><img mat-list-avatar src="/assets/images/resources/mana.png"></div>
            <div mat-list-avatar *ngIf="!god.armageddon && god.population > 0" [matBadge]="(god.sacrifice | short) + ' / ' + (god.population | short)" matBadgePosition="above after"><img mat-list-avatar src="/assets/images/resources/population.png"></div>
            <div mat-list-avatar *ngIf="!god.armageddon && god.land > 0" [matBadge]="(god.sacrifice | short) + ' / ' + (god.land | short)" matBadgePosition="above after"><img mat-list-avatar src="/assets/images/resources/land.png"></div>
            <div mat-list-avatar *ngIf="!god.armageddon && god.turn > 0" [matBadge]="(god.sacrifice | short) + ' / ' + (god.turn | short)" matBadgePosition="above after"><img mat-list-avatar src="/assets/images/resources/turn.png"></div>
            <div mat-list-avatar *ngIf="god.armageddon"><img mat-list-avatar src="/assets/images/spells/grey/armageddon.png"></div>
          </button>
        </mat-action-list>
      </mat-card-content>

    </mat-card>

  </div>

  <div fxFlex.xl="66" fxFlex.lg="66" fxFlex.md="50" fxFlex.sm="100" fxFlex.xs="100">

    <div fxLayout="row wrap" fxLayoutGap="10px grid">
      <div fxFlex.xl="50" fxFlex.lg="50" fxFlex.md="100" fxFlex.sm="100" fxFlex.xs="100">

        <mat-card>
          <mat-card-header>
            <img mat-card-avatar src="/assets/images/cards/dispel.png">
            <mat-card-title>{{ 'kingdom.dispel.name' | translate }}</mat-card-title>
            <mat-card-subtitle>{{ 'kingdom.dispel.description' | translate }}</mat-card-subtitle>
          </mat-card-header>

          <mat-card-content>
            <span>{{ 'kingdom.dispel.help' | translate }}</span>
            <div matSubheader>{{ 'card.list.enchantments' | translate }}:</div>
            <mat-action-list dense tourAnchor="tour.dispel">
              <button mat-list-item *ngFor="let enchantment of kingdomEnchantments" (click)="openDispelDialog(enchantment)" [ngClass]="[enchantment.join.faction, (enchantment.join | legendary) ? 'legendary' : 'common']">
                <div mat-list-avatar [matBadge]="enchantment.join.level" matBadgePosition="above before" [matBadgeColor]="enchantment.from === uid ? 'accent' : 'warn'">
                  <img mat-list-avatar [src]="enchantment.join.image">
                </div>
                <div mat-line>{{ enchantment.join.name | translate }}</div>
                <div mat-line class="mat-card-subtitle" [innerHTML]="enchantment.join.description | translate | icon:enchantment.join"></div>
                <div mat-line>
                  <mat-progress-bar [color]="enchantment.from === uid ? 'accent' : 'warn'" [value]="enchantment.turns * 100 / enchantment.join.turnDuration"></mat-progress-bar>
                </div>
                <div mat-list-avatar [matBadge]="enchantment.turns" matBadgePosition="above after" [matBadgeColor]="enchantment.from === uid ? 'accent' : 'warn'">
                  <img mat-list-avatar src="/assets/images/resources/turn.png">
                </div>
              </button>
            </mat-action-list>
          </mat-card-content>
        </mat-card>

      </div>

    </div>

  </div>
</div>
