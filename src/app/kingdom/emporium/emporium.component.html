<div class="kingdom-emporium" fxLayout="row wrap" fxLayoutGap="10px grid" [@fadeInOnEnter]>

  <div fxFlex.xl="33" fxFlex.lg="33" fxFlex.md="50" fxFlex.sm="100" fxFlex.xs="100">

    <mat-card>
      <mat-card-header>
        <img mat-card-avatar src="/assets/images/cards/emporium.png" [alt]="'kingdom.emporium.name' | translate">
        <mat-card-title>{{ 'kingdom.emporium.name' | translate }}</mat-card-title>
        <mat-card-subtitle>{{ 'kingdom.emporium.description' | translate }}</mat-card-subtitle>
        <div class="mat-card-extras">
          <button mat-icon-button (click)="this.tutorialService.start('tour.emporium')"><mat-icon>help</mat-icon></button>
          <mat-chip-list><mat-chip color="primary"><mat-icon>sell</mat-icon>{{ emporiumItems.length | long }}</mat-chip></mat-chip-list>
        </div>
      </mat-card-header>

      <mat-card-content>
        <div matSubheader>{{ 'card.list.artifacts' | translate }}:</div>
        <mat-action-list dense tourAnchor="tour.emporium">
          <button mat-list-item *ngFor="let item of emporiumItems" (click)="openBuyDialog(item)" [ngClass]="item.legendary ? 'legendary' : 'common'">
            <div mat-list-avatar matBadge="1" matBadgePosition="above before">
              <img mat-list-avatar [src]="item.image" [alt]="item.name | translate">
            </div>
            <div mat-line>{{ item.name | translate }}</div>
            <div mat-line class="mat-card-subtitle" [innerHTML]="item.description | translate | icon:item"></div>
            <div mat-list-avatar [matBadge]="item.gems" matBadgePosition="above after">
              <img mat-list-avatar src="/assets/images/resources/gem.png" [alt]="'resource.gem.name' | translate">
            </div>
          </button>
        </mat-action-list>
      </mat-card-content>
      <mat-card-content>
        <p [innerHTML]="'kingdom.emporium.help' | translate | icon"></p>
      </mat-card-content>
    </mat-card>

  </div>

  <div fxFlex.xl="33" fxFlex.lg="33" fxFlex.md="50" fxFlex.sm="100" fxFlex.xs="100">

    <mat-card>
      <mat-card-header>
        <img mat-card-avatar src="/assets/images/cards/tree.png" [alt]="'kingdom.tree.name' | translate">
        <mat-card-title>{{ 'kingdom.tree.name' | translate }}</mat-card-title>
        <mat-card-subtitle>{{ 'kingdom.tree.description' | translate }}</mat-card-subtitle>
        <div class="mat-card-extras">
          <button mat-icon-button (click)="this.tutorialService.start('tour.tree')"><mat-icon>help</mat-icon></button>
          <mat-chip-list><mat-chip color="primary"><mat-icon>diamond</mat-icon>{{ PERK_COST }}</mat-chip></mat-chip-list>
        </div>
      </mat-card-header>

      <mat-card-content class="tree" tourAnchor="tour.tree">
        <app-perk [perk]="kingdomTree" [disabled]="false" *ngIf="kingdomTree" (increasedPerk)="increaseGems($event)"></app-perk>
      </mat-card-content>

      <mat-card-content>
        <p [innerHTML]="'kingdom.tree.help' | translate | icon"></p>
      </mat-card-content>

      <mat-card-actions>
        <span class="fill-space"></span>
        <button mat-button (click)="resetTree()">{{ 'kingdom.tree.reset' | translate }}</button>
        <button mat-raised-button color="primary" [disabled]="!gems" (click)="openPlantDialog()">{{ 'kingdom.tree.save' | translate }} ( {{ gems }} <img class="mat-icon" src="/assets/images/resources/gem.png" [alt]="'resource.gem.name' | translate"> )</button>
      </mat-card-actions>
    </mat-card>

  </div>

  <div fxFlex.xl="33" fxFlex.lg="33" fxFlex.md="50" fxFlex.sm="100" fxFlex.xs="100">

    <mat-card>
      <mat-card-header>
        <img mat-card-avatar src="/assets/images/cards/mining.png" [alt]="'kingdom.mining.name' | translate">
        <mat-card-title>{{ 'kingdom.mining.name' | translate }}</mat-card-title>
        <mat-card-subtitle>{{ 'kingdom.mining.description' | translate }}</mat-card-subtitle>
        <div class="mat-card-extras">
          <button mat-icon-button (click)="this.tutorialService.start('tour.mining')"><mat-icon>help</mat-icon></button>
          <mat-chip-list><mat-chip color="primary"><mat-icon>redeem</mat-icon>{{ emporiumPacks.length | long }}</mat-chip></mat-chip-list>
        </div>
      </mat-card-header>

      <mat-card-content>
        <div matSubheader>{{ 'card.list.packs' | translate }}:</div>
        <mat-action-list dense tourAnchor="tour.mining">
          <button mat-list-item *ngFor="let pack of emporiumPacks" class="common" disabled>
            <div mat-list-avatar [matBadge]="pack.quantity" matBadgePosition="above before">
              <img mat-list-avatar [src]="pack.image" [alt]="pack.name | translate">
            </div>
            <div mat-line>{{ pack.name | translate }}</div>
            <div mat-line class="mat-card-subtitle" [innerHTML]="pack.description | translate | icon:pack"></div>
            <div mat-list-avatar [matBadge]="pack.money + 'â‚¬'" matBadgePosition="above after">
              <img mat-list-avatar src="/assets/images/stores/merchant.png" [alt]="'store.merchant.name' | translate">
            </div>
          </button>
        </mat-action-list>
      </mat-card-content>
      <mat-card-content>
        <p [innerHTML]="'kingdom.mining.help' | translate | icon"></p>
      </mat-card-content>
    </mat-card>

  </div>
</div>
